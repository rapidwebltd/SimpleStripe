

<form action="" method="POST" id="payment-form">
  <span class="payment-errors"></span>

  <div class="form-row">
    <label>
      <span>Card Number</span>
      <input type="text" size="20" data-stripe="number">
    </label>
  </div>

  <div class="form-row">
    <label>
      <span>Expiration (MM/YY)</span>
      <input type="text" size="2" data-stripe="exp_month">
    </label>
    <span> / </span>
    <input type="text" size="2" data-stripe="exp_year">
  </div>

  <div class="form-row">
    <label>
      <span>CVC</span>
      <input type="text" size="4" data-stripe="cvc">
    </label>
  </div>

  <input type="submit" class="submit" value="Submit Payment">
</form>

<script type="text/javascript" src="https://js.stripe.com/v2/"></script>

<script type="text/javascript">
    Stripe.setPublishableKey('[[SIMPLESTRIPE_PUBLISHABLE_KEY]]');

    document.addEventListener('DOMContentLoaded', function() {
        var form = document.getElementById('payment-form');
        form.addEventListener('submit', function(event) {
            form.getElementsByClassName('submit')[0].disabled = true;
            Stripe.card.createToken(form, stripeResponseHandler);
            event.preventDefault();
            return false;
        });
    });

    function stripeResponseHandler(status, response) {
        var form = document.getElementById('payment-form');

        if (response.error) {
            form.getElementsByClassName('payment-errors')[0].innerHTML = response.error.message;
            form.getElementsByClassName('submit')[0].disabled = false;

        } else {
            var token = response.id;
            var hiddenInput = document.createElement('input');
            hiddenInput.type = 'hidden';
            hiddenInput.name = 'stripeToken';
            hiddenInput.value = token;
            form.appendChild(hiddenInput);
            form.submit();
        }
    };
</script>